;/*FB_PKG_DELIM*/

__d("PolarisVpvdImpressionActionForCarousel_media.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:{plural:!0},name:"PolarisVpvdImpressionActionForCarousel_media",selections:[{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"pk",storageKey:null},action:"THROW"}],type:"XDTMediaDict",abstractKey:null};e.exports=a}),null);
__d("PolarisVpvdImpressionActionForClip_media.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PolarisVpvdImpressionActionForClip_media",selections:[{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"pk",storageKey:null},action:"THROW"}],type:"XDTMediaDict",abstractKey:null};e.exports=a}),null);
__d("PolarisVpvdImpressionActionForPost_media.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PolarisVpvdImpressionActionForPost_media",selections:[{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"pk",storageKey:null},action:"THROW"},{alias:null,args:null,kind:"ScalarField",name:"media_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"inventory_source",storageKey:null},{alias:null,args:null,concreteType:"XDTUserDict",kind:"LinkedField",name:"user",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],type:"XDTMediaDict",abstractKey:null};e.exports=a}),null);
__d("PolarisVpvdImpressionAction.next.react",["CometRelay","IGNavChain","InstagramAdVpvdImpFalcoEvent","InstagramOrganicCarouselVpvdImpFalcoEvent","InstagramOrganicVpvdImpFalcoEvent","PolarisContainerModuleUtils","PolarisLoggerUtils","PolarisViewpointActionUtils","PolarisVpvdImpressionActionForCarousel_media.graphql","PolarisVpvdImpressionActionForClip_media.graphql","PolarisVpvdImpressionActionForPost_media.graphql","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=250,l=500,m=new Map(),n=new Map(),o=new Set();function p(a,b){var c=m.get(a);b.percentVisible>=.5&&c==null&&m.set(a,b.snapshotTime);if(b.percentVisible<.5&&c!=null){c=b.snapshotTime-c;n.set(a,c+((c=n.get(a))!=null?c:0));m["delete"](a)}c=(c=n.get(a))!=null?c:0;if(b.state==="exited"&&c>=k){n["delete"](a);return c}return null}function q(a){return a>=l?a:null}function r(a,b,e,f,g,h,i){var j=d("react-compiler-runtime").c(8),k;j[0]!==h||j[1]!==i||j[2]!==g||j[3]!==a||j[4]!==b||j[5]!==e||j[6]!==(f==null?void 0:f.id)?(k=function(j){var k,l=h!=null&&i!=null,m=e;l&&h!=null&&i!=null&&(m=h);j=p(m,j);if(j==null)return;var n={client_sub_impression:o.has(m),inventory_source:a,legacy_duration_ms:q(j),m_pk:d("PolarisViewpointActionUtils").getMPKForFeedMediaDict(e,f==null?void 0:f.id),m_t:(k=b==null?void 0:b.toString())!=null?k:"",max_duration_ms:j,nav_chain:(k=c("IGNavChain").getInstance())==null?void 0:k.getNavChainForSend(),pigeon_reserved_keyword_module:d("PolarisContainerModuleUtils").getContainerModule(g),pk:f==null?void 0:f.id,sum_duration_ms:j};l&&h!=null&&i!=null?(c("InstagramAdVpvdImpFalcoEvent").log(function(){var a;return babelHelpers["extends"]({},n,{ad_id:h,m_pk:(a=n.m_pk)!=null?a:"",max_duration_ms:n.max_duration_ms.toString(),tracking_token:i})}),j>=2e3&&h!=null&&c("InstagramAdVpvdImpFalcoEvent").logImmediately(function(){var a;return babelHelpers["extends"]({},n,{ad_id:h,m_pk:(a=n.m_pk)!=null?a:"",max_duration_ms:n.max_duration_ms.toString(),module_name:"engaged_view",tracking_token:i})})):c("InstagramOrganicVpvdImpFalcoEvent").log(function(){return babelHelpers["extends"]({},n)});o.add(m)},j[0]=h,j[1]=i,j[2]=g,j[3]=a,j[4]=b,j[5]=e,j[6]=f==null?void 0:f.id,j[7]=k):k=j[7];return k}function a(a,c,e,f){a=d("CometRelay").useFragment(h!==void 0?h:h=b("PolarisVpvdImpressionActionForPost_media.graphql"),a);var g=a.inventory_source,i=a.media_type,j=a.pk;a=a.user;return r(g,i,j,a,c,e,f)}function s(a,b,e,f,g){var h=d("react-compiler-runtime").c(14);if(b==null){var i;h[0]===Symbol["for"]("react.memo_cache_sentinel")?(i=[],h[0]=i):i=h[0];return i}var j=b[0];if(h[1]!==e||h[2]!==j||h[3]!==a||h[4]!==g||h[5]!==f||h[6]!==b){h[8]!==e||h[9]!==j||h[10]!==a||h[11]!==g||h[12]!==f?(i=function(b,h){return function(i){var k=p(b,i);if(k==null)return;c("InstagramOrganicCarouselVpvdImpFalcoEvent").log(function(){var i;return{carousel_cover_media_id:d("PolarisLoggerUtils").getFormattedMediaID(j,f!=null?f:""),carousel_index:h.toString(),carousel_media_id:d("PolarisLoggerUtils").getFormattedMediaID(b,f!=null?f:""),carousel_starting_media_id:j,client_sub_impression:o.has(b),inventory_source:g,legacy_duration_ms:q(k),m_pk:d("PolarisLoggerUtils").getFormattedMediaID(a,f!=null?f:""),max_duration_ms:k,nav_chain:(i=c("IGNavChain").getInstance())==null?void 0:i.getNavChainForSend(),pigeon_reserved_keyword_module:d("PolarisContainerModuleUtils").getContainerModule(e),sum_duration_ms:k}});o.add(b)}},h[8]=e,h[9]=j,h[10]=a,h[11]=g,h[12]=f,h[13]=i):i=h[13];i=b.map(i);h[1]=e;h[2]=j;h[3]=a;h[4]=g;h[5]=f;h[6]=b;h[7]=i}else i=h[7];return i}function e(a,c,e,f,g){var h=d("react-compiler-runtime").c(2);c=d("CometRelay").useFragment(i!==void 0?i:i=b("PolarisVpvdImpressionActionForCarousel_media.graphql"),c);var j;h[0]!==c?(j=c==null?void 0:c.map(t),h[0]=c,h[1]=j):j=h[1];return s(a,j,e,f,g)}function t(a){return a.pk}function f(a,b,e,f,g,h,i,j,k){return function(l){var m=d("PolarisContainerModuleUtils").getContainerModule(h);if(b==null)return;var n=p(b,l);if(n==null)return;c("InstagramOrganicVpvdImpFalcoEvent").log(function(){var d;return{client_sub_impression:o.has(b),is_stories_pog_impression:!j,legacy_duration_ms:q(n),m_pk:b,max_duration_ms:n,nav_chain:(d=c("IGNavChain").getInstance())==null?void 0:d.getNavChainForSend(),pigeon_reserved_keyword_module:i!=null?i:m,reel_id:a,reel_position:e.toString(),sum_duration_ms:n,tray_session_id:f,viewer_session_id:g}});o.add(b);j===!1&&k(!0)}}function u(a,e,f){var g=d("react-compiler-runtime").c(4);a=d("CometRelay").useFragment(j!==void 0?j:j=b("PolarisVpvdImpressionActionForClip_media.graphql"),a);var h=a.pk;g[0]!==f||g[1]!==e||g[2]!==h?(a=function(a){var b=p(h,a);if(b==null)return;c("InstagramOrganicVpvdImpFalcoEvent").log(function(){var a;return{client_sub_impression:o.has(h),legacy_duration_ms:q(b),m_pk:h,max_duration_ms:b,nav_chain:(a=c("IGNavChain").getInstance())==null?void 0:a.getNavChainForSend(),pigeon_reserved_keyword_module:d("PolarisContainerModuleUtils").getContainerModule(f),reel_id:h,reel_position:e.toString(),sum_duration_ms:b}});o.add(h)},g[0]=f,g[1]=e,g[2]=h,g[3]=a):a=g[3];return a}g.getDwellTime=p;g.usePostVpvdImpressionActionBase=r;g.usePostVpvdImpressionAction=a;g.useCarouselVpvdImpressionActionBase=s;g.useCarouselVpvdImpressionAction=e;g.makeStoriesVpvdImpressionAction=f;g.useClipVpvdImpressionAction=u}),98);