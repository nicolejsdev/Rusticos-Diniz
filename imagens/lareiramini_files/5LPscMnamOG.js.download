;/*FB_PKG_DELIM*/

__d("PolarisAPIGetChildComments",["PolarisInstapi"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c,e){return d("PolarisInstapi").apiGet("/api/v1/media/{media_id}/comments/{parent_comment_id}/child_comments/",{path:{media_id:a,parent_comment_id:b},query:babelHelpers["extends"]({min_id:c!=null?c:void 0},e===!0?{is_chronological:!0,paging_direction:"view_more"}:{})}).then(function(a){return a.data})}g.getChildComments=a}),98);
__d("XPolarisViewCommentsControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsRouteBuilder")("/api/v1/media/{media_id}/comments/",Object.freeze({permalink_enabled:!1,should_send_media:!1,can_support_threading:!1,can_support_carousel_mentions:!1,can_support_nested_replies:!1,add_graphql_debug_info:!1,should_fetch_creator_comment_nudge:!1,should_fetch_fb_comments_for_ads:!1}),void 0);b=a;g["default"]=b}),98);
__d("PolarisAPIGetInitialComments",["PolarisInstapi","XPolarisViewCommentsControllerRouteBuilder","asyncToGeneratorRuntime","cometAsyncFetch","gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){var f=c("gkx")("13423");if(f){f=(yield c("cometAsyncFetch")(c("XPolarisViewCommentsControllerRouteBuilder").buildURL({can_support_threading:!0,media_id:a,permalink_enabled:!!b,sort_order:e!=null?e:void 0,target_comment_id:b})));return f}f=(yield d("PolarisInstapi").apiGet("/api/v1/media/{media_id}/comments/",{path:{media_id:a},query:{can_support_threading:!0,permalink_enabled:!!b,sort_order:e!=null?String(e):void 0,target_comment_id:b}}));return f.data});return h.apply(this,arguments)}g.getInitialComments=a}),98);
__d("PolarisAPIGetPaginationComments",["PolarisInstapi","XPolarisViewCommentsControllerRouteBuilder","asyncToGeneratorRuntime","cometAsyncFetch","gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c,d){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f){e===void 0&&(e=!0);var g=c("gkx")("13423");if(g){g=(yield c("cometAsyncFetch")(c("XPolarisViewCommentsControllerRouteBuilder").buildURL(babelHelpers["extends"]({can_support_threading:!0},e===!0?{min_id:b}:{max_id:b},{media_id:a,sort_order:f}))));return g}g=(yield d("PolarisInstapi").apiGet("/api/v1/media/{media_id}/comments/",{path:{media_id:a},query:babelHelpers["extends"]({can_support_threading:!0},e===!0?{min_id:b}:{max_id:b},{sort_order:String(f)})}));return g.data});return h.apply(this,arguments)}g.getPaginationComments=a}),98);
__d("polarisTransformCommentEntities",["PolarisCommentModel","PolarisUserModel","polarisTransformEntities"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b;return{comments:c("polarisTransformEntities")((b=a.commentDicts)!=null?b:{},function(a){return c("PolarisCommentModel").fromNativeResponse(a).toReduxStore()}),users:c("polarisTransformEntities")((b=a.userDicts)!=null?b:{},function(a){return c("PolarisUserModel").fromNativeResponse(a).toReduxStore()})}}g["default"]=a}),98);
__d("PolarisThreadedCommentActions",["PolarisAPIGetChildComments","PolarisAPIGetInitialComments","PolarisAPIGetPaginationComments","PolarisLegacyGraphQLPaginationUtils","PolarisPaginationUtils","PolarisThreadedCommentActionConstants","polarisNormalizeComments","polarisTransformCommentEntities","qex"],(function(a,b,c,d,e,f,g){"use strict";var h="6718530511526291";function a(a){return{parentId:a,type:"HIDE_CHILD_COMMENTS"}}function b(a){return{parentId:a,type:"SHOW_CHILD_COMMENTS"}}function i(a,b){b=b.map(function(a){return a.pk});var c={};for(b of b)b!=null&&a[b]!=null&&(c[b]=a[b]);return c}h=d("PolarisLegacyGraphQLPaginationUtils").generatePaginationActionCreators({getState:function(a,b){return(a=a.threadedComments.childByParentId[b])==null?void 0:a.pagination},onError:function(a,b,c){return{fetch:b,parentId:c,type:"CHILD_COMMENT_REQUEST_FAILED"}},onUpdate:function(a,b,c){var d;b=b==null||(d=b.comment)==null?void 0:d.edge_threaded_comments;return{comments:b&&b.edges?b.edges.map(function(a){return a.node}):[],count:b&&b.count,fetch:a,pageInfo:b&&b.page_info,parentId:c,type:"CHILD_COMMENT_REQUEST_UPDATED"}},pageSize:c("qex")._("2137")?d("PolarisThreadedCommentActionConstants").CHILD_PAGE_SIZE_V2:d("PolarisThreadedCommentActionConstants").CHILD_PAGE_SIZE,pagesToPreload:d("PolarisThreadedCommentActionConstants").PAGES_TO_PRELOAD,queryId:h,queryParams:function(a){return{comment_id:a}}});function j(a,b,e){var f,g=b.has_more_comments===!0||b.has_more_headload_comments===!0,h=b.has_more_headload_comments===!0,j=g?h?b.next_min_id:b.next_max_id:"";f=(f=b.comment_count)!=null?f:0;b=(b=b.comments)!=null?b:[];var k=c("polarisTransformCommentEntities")(d("polarisNormalizeComments").normalizeComments(b).entities);return{comments:i(k.comments,b),count:f,pagination:{end_cursor:j,has_next_page:g,has_previous_page:h},postId:a,sortOrder:e,type:"INITIAL_PARENT_COMMENT_REQUEST_LOADED",users:(b=k.users)!=null?b:{}}}function k(a){return{postId:a,type:"INITIAL_PARENT_COMMENT_REQUEST_FAILED"}}function l(a,b,c){return function(e,f){f=f();f=f.threadedComments;if(c!=null&&((f=f.parentByPostId[a])==null?void 0:f.sortOrder)===c)return;e({postId:a,type:"INITIAL_PARENT_COMMENT_REQUEST_LOADING"});return d("PolarisAPIGetInitialComments").getInitialComments(a,b,c).then(function(b){e(j(a,b,c))})["catch"](function(b){e(k(a))})}}function m(a,b){return function(e,f){var g;f=f();f=f.threadedComments;g=(g=(g=f.parentByPostId[a])==null?void 0:g.pagination)!=null?g:null;f=f.parentByPostId[a].sortOrder;if(g==null)return;var h=d("PolarisPaginationUtils").getEndCursor(g);if(h==null)return;e({postId:a,type:"PARENT_COMMENT_REQUEST_LOADING"});return d("PolarisAPIGetPaginationComments").getPaginationComments(a,h,d("PolarisPaginationUtils").hasPreviousPage(g)===!0,f).then(function(f){var g,h=f.has_more_comments===!0||f.has_more_headload_comments===!0,j=f.has_more_headload_comments===!0,k=h?j?f.next_min_id:f.next_max_id:"";g=(g=f.comment_count)!=null?g:0;f=(f=f.comments)!=null?f:[];var l=c("polarisTransformCommentEntities")(d("polarisNormalizeComments").normalizeComments(f).entities);e({comments:i(l.comments,f),count:g,hasRankedComments:b!=null?b:!1,pagination:{end_cursor:k,has_next_page:h,has_previous_page:j},postId:a,type:"PARENT_COMMENT_REQUEST_UPDATED_V2",users:(f=l.users)!=null?f:{}})})["catch"](function(){e({postId:a,type:"PARENT_COMMENT_REQUEST_FAILED_V2"})})}}function n(a,b){return function(e,f){e({parentId:b,type:"CHILD_COMMENT_REQUEST_LOADING"});var g=c("qex")._("2138")===!0;f=f();f=f.threadedComments;f=(f=f.childByParentId[b])==null?void 0:f.pagination;var h;f!=null&&(h=d("PolarisPaginationUtils").getEndCursor(f));h=h!=null?h:null;return d("PolarisAPIGetChildComments").getChildComments(a,b,h,g).then(function(f){var h,i,j,k=f.has_more_head_child_comments===!0||f.has_more_tail_child_comments===!0;h=g?f.next_min_child_cursor:(h=f.next_max_child_cursor)!=null?h:"";i=(i=f.child_comment_count)!=null?i:0;f=(f=f.child_comments)!=null?f:[];f=c("polarisTransformCommentEntities")(d("polarisNormalizeComments").normalizeComments(f).entities);e({comments:(j=f.comments)!=null?j:{},count:i,pagination:{end_cursor:h,has_next_page:k},parentId:b,postId:a,type:"CHILD_COMMENT_REQUEST_UPDATED_V2",users:(j=f.users)!=null?j:{}})})["catch"](function(){e({parentId:b,type:"CHILD_COMMENT_REQUEST_FAILED_V2"})})}}function e(a,b){return function(c){return c(m(a,b))}}function f(a,b,c){return function(d){return d(l(a,b,c))}}h=h.next;function o(a,b){return function(c){return c(n(a,b))}}function p(a){return function(b){return function(c){c(j(a,b))}}}g.hideChildComments=a;g.showChildComments=b;g.initialCommentsError=k;g.requestNextParentCommentPageV2=e;g.requestInitialComments=f;g.requestNextChildCommentPage=h;g.requestNextChildCommentPageV2=o;g.setupPostComments=p}),98);